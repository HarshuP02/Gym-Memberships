{% extends "member/member_base.html" %}
{% block title %}My Membership{% endblock %}

{% block content %}

<div class="member-dashboard">

  <div class="welcome-card">
    <h2>Welcome, {{ data.name }}</h2>
    <p class="muted">Your membership overview</p>
  </div>

  {% if data.plan %}

  {# ---------- DATE VALUES COME FROM BACKEND ---------- #}
  {# remaining_days â†’ int #}
  {# progress â†’ int (0â€“100) #}
  {# is_active â†’ bool #}


<div class="membership-card">

  <div class="membership-header">
    <h3>{{ data.plan }}</h3>

    {% if is_active %}
      <span class="badge active">Active</span>
    {% else %}
      <span class="badge expired">Expired</span>
    {% endif %}
  </div>

  <div class="membership-info">
    <div>
      <span class="label">Start Date</span>
      <span class="value">{{ data.start_date }}</span>
    </div>
    <div>
      <span class="label">End Date</span>
      <span class="value">{{ data.end_date }}</span>
    </div>
  </div>

  <!-- Progress -->
  <div class="progress-section">
    <div class="progress-label">
      <span>Membership Progress</span>
      <span>{{ remaining_days }} days left</span>
    </div>

    <div class="progress-bar">
      <div
        class="progress-fill"
        style="width: {{ progress }}%;"
      ></div>
      </div>
    </div>
    {% if is_active and remaining_days <= 7 %}
      <div class="expiry-warning">
        âš  Expiring in {{ remaining_days }} days. Please renew soon.
      </div>
    {% endif %}
    {% if is_active and remaining_days <= 7 %}
      <div class="renew-suggestion">
        <p>ğŸ’¡ Renew now to avoid interruption</p>
        <span>Contact gym admin for renewal</span>
      </div>
    {% endif %}

  </div>


  {% else %}
  <div class="no-membership">
    <p>âŒNo active membership found.</p>
    <p class="muted">Please contact gym admin.</p>
  </div>
  {% endif %}

</div>

{% endblock %}